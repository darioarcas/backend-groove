/backend/README.me


# Backend - Plataforma de Cursos Online

Este backend estÃ¡ construido con **Node.js + Express**, y utiliza **Firebase Admin** y **Mercado Pago** para manejar la lÃ³gica de usuarios y pagos.




## ğŸ“ Estructura del proyecto

backend/
â”œâ”€â”€ app.js # Archivo principal donde se configura y levanta el servidor Express
â”œâ”€â”€ .env # Variables de entorno (API keys, Firebase, Mercado Pago)
â”œâ”€â”€ firebaseAdmin.js # InicializaciÃ³n del SDK Admin de Firebase para acceder a Firestore y validar tokens

â”œâ”€â”€ /routes
â”‚ â”œâ”€â”€ paymentRoutes.js # Endpoint para crear preferencias de pago (Mercado Pago)
â”‚ â””â”€â”€ webhookRoutes.js # Webhook que recibe notificaciones de Mercado Pago tras un pago exitoso

â”œâ”€â”€ /middlewares
â”‚ â””â”€â”€ authMiddleware.js # Middleware para verificar el token de autenticaciÃ³n de Firebase

â”œâ”€â”€ /services
â”‚ â””â”€â”€ mercadoPagoService.js # LÃ³gica para comunicarse con la API REST de Mercado Pago (crear preferencia de pago)
â”‚ â””â”€â”€ paypalService.js # (opcional) lÃ³gica futura para pagos con Paypal








## ğŸ”§ Requisitos

- Node.js
- Firebase Admin SDK (con un archivo `serviceAccountKey.json`)
- Cuenta de desarrollador de Mercado Pago
- Cuentas de prueba de comprador y vendedor

## ğŸ“Œ Funcionalidades

- AutenticaciÃ³n de usuarios con Firebase
- CreaciÃ³n de preferencias de pago con Mercado Pago
- RecepciÃ³n de notificaciones de pago mediante Webhook
- ActualizaciÃ³n automÃ¡tica del acceso del usuario a cursos comprados
- Reglas de seguridad para proteger Firestore

## ğŸ§ª Pruebas

- Crear preferencias desde frontend o Postman.
- Realizar pagos con cuentas de prueba.
- Verificar que el campo `cursosComprados` del usuario se actualice automÃ¡ticamente en Firestore.

## ğŸ”’ Seguridad

- Solo el backend puede modificar `cursosComprados` (validado con reglas de Firestore).
- AutenticaciÃ³n con tokens de Firebase en endpoints protegidos.
- Webhook verificado con consulta a la API oficial de Mercado Pago.

